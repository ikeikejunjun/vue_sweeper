(function(){"use strict";var t={3583:function(t,e,i){var s=i(9963),n=i(6252);function r(t,e,i,s,r,o){const l=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(l)}var o=i(1124),l=i(3577);const h={class:"status-bar"},a={class:"counters"},u={class:"counter"},c={class:"counter"},p={id:"board",style:{}};function d(t,e,i,s,r,o){const d=(0,n.up)("router-link"),m=(0,n.up)("cell");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("section",null,[(0,n._)("div",h,[(0,n._)("div",a,[(0,n._)("div",u,(0,l.zw)(t.timer.playTime),1),(0,n._)("div",c,(0,l.zw)(t.restMinesNum),1)]),(0,n._)("div",{class:"btn",id:"start-btn",onClick:e[0]||(e[0]=e=>t.resetSetting())},(0,l.zw)(t.startButtonText),1),(0,n.Wm)(d,{class:"btn",id:"setting-btn",to:t.settingButtonUrl},{default:(0,n.w5)((()=>[(0,n.Uk)("設定")])),_:1},8,["to"])])]),(0,n._)("section",null,[(0,n._)("table",p,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.rows,((e,i)=>((0,n.wg)(),(0,n.iD)("tr",{id:"row",key:i},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e,((e,s)=>((0,n.wg)(),(0,n.j4)(m,{key:s,cell:e,onLeftClick:e=>t.openCell(i,s),onRightClick:e=>t.setFlagToCell(i,s),ref_for:!0,ref:"cells"},null,8,["cell","onLeftClick","onRightClick"])))),128))])))),128))])])],64)}var m=i(7327);const f={key:0},g={key:1};function w(t,e,i,r,o,h){const a=(0,n.up)("icon-mine"),u=(0,n.up)("icon-flag");return(0,n.wg)(),(0,n.iD)("td",{class:(0,l.C_)(["cell",t.classArray]),onClick:e[0]||(e[0]=e=>t.$emit("left-click")),onContextmenu:e[1]||(e[1]=(0,s.iM)((e=>t.$emit("right-click")),["right","prevent"]))},[t.cell.isOpen?((0,n.wg)(),(0,n.iD)("div",f,[(0,n.Uk)((0,l.zw)(t.cell.mineCount)+" ",1),t.cell.hasMine?((0,n.wg)(),(0,n.j4)(a,{key:0})):(0,n.kq)("",!0)])):((0,n.wg)(),(0,n.iD)("div",g,[t.cell.isFlag?((0,n.wg)(),(0,n.j4)(u,{key:0})):(0,n.kq)("",!0)]))],34)}const v=t=>((0,n.dD)("data-v-7411edbe"),t=t(),(0,n.Cn)(),t),b={class:"flag"},y=v((()=>(0,n._)("div",{class:"pole"},null,-1))),_=v((()=>(0,n._)("div",{class:"field"},null,-1))),C=[y,_];function O(t,e,i,s,r,o){return(0,n.wg)(),(0,n.iD)("div",b,C)}var k=new class{},M=i(3744);const N=(0,M.Z)(k,[["render",O],["__scopeId","data-v-7411edbe"]]);var D=N;const x={class:"mine"},Z=(0,n.uE)('<div class="circle" data-v-505e5498></div><div class="bar" data-v-505e5498></div><div class="bar" style="transform:rotate(45deg);" data-v-505e5498></div><div class="bar" style="transform:rotate(90deg);" data-v-505e5498></div><div class="bar" style="transform:rotate(135deg);" data-v-505e5498></div>',5),j=[Z];function T(t,e,i,s,r,o){return(0,n.wg)(),(0,n.iD)("div",x,j)}var R=new class{};const U=(0,M.Z)(R,[["render",T],["__scopeId","data-v-505e5498"]]);var $=U,E=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let G=class extends o.w3{constructor(...t){super(...t),(0,m.Z)(this,"cell",void 0)}get classArray(){const{cell:t}=this;return this.cell.isOpen?["open",`color-${t.mineCount}`]:t.isFlag?["flag"]:[]}};G=E([(0,o.Ei)({components:{IconFlag:D,IconMine:$},props:{cell:{type:Object,required:!0}}})],G);var B=G;const F=(0,M.Z)(B,[["render",w],["__scopeId","data-v-82d0bfc0"]]);var H=F;i(7658);class W{constructor(t,e,i){(0,m.Z)(this,"height",void 0),(0,m.Z)(this,"width",void 0),(0,m.Z)(this,"mine",void 0),this.height=t,this.width=e,this.mine=i}get canBeOpenedCellNum(){return this.width*this.height-this.mine}initRows(){const t=[];for(let e=0;e<this.height;e++){const e=[];for(let t=0;t<this.width;t++){const t={hasMine:!1,isOpen:!1,isFlag:!1,mineCount:""};e.push(t)}t.push(e)}return t}putMines(t,e,i){for(let s=0;s<this.mine;s++){let s=!0;while(s){const n=Math.floor(Math.random()*this.height),r=Math.floor(Math.random()*this.width);i[n][r].hasMine||n==t||r==e||(console.log("Game putMines x:"+n+" y:"+r),i[n][r].hasMine=!0,s=!1)}}}setMinesCount(t){t.forEach(((e,i)=>{e.forEach(((e,s)=>{if(!e.hasMine){let n=0;for(let e=i-1;e<=i+1;e++)for(let i=s-1;i<=s+1;i++)e>=0&&e<this.height&&i>=0&&i<this.width&&t[e][i].hasMine&&n++;e.mineCount=0===n?"":n.toString()}}))}))}openAroundCells(t,e,i){for(let s=t-1;s<=t+1;s++)for(let t=e-1;t<=e+1;t++)if(s>=0&&s<this.height&&t>=0&&t<this.width){if(i[s][t].isOpen||i[s][t].isFlag)continue;""===i[s][t].mineCount?(i[s][t].isOpen=!0,this.openAroundCells(s,t,i)):i[s][t].isOpen=!0}}}class P{constructor(){(0,m.Z)(this,"playTime",0),(0,m.Z)(this,"startTime",null),(0,m.Z)(this,"timer",null),this.playTime=0,this.startTime=null,this.timer=null}start(){console.log("Timer start playTime:"+this.playTime),this.startTime=Date.now(),this.timer=setInterval((()=>{this.playTime=Math.floor((Date.now()-this.startTime)/1e3)}),1e3)}stop(){clearInterval(this.timer)}reset(){this.stop(),this.playTime=0,this.startTime=null}}var I=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let S=class extends o.w3{constructor(...t){super(...t),(0,m.Z)(this,"width",9),(0,m.Z)(this,"height",9),(0,m.Z)(this,"mine",10),(0,m.Z)(this,"rows",[]),(0,m.Z)(this,"startButtonText","Reset"),(0,m.Z)(this,"progressGame",new W(this.height,this.width,this.mine)),(0,m.Z)(this,"timer",new P)}mounted(){this.width=0==Number(this.$route.params.width)?9:Number(this.$route.params.width),this.height=0==Number(this.$route.params.height)?9:Number(this.$route.params.height),this.mine=0==Number(this.$route.params.mine)?10:Number(this.$route.params.mine),this.progressGame=new W(this.height,this.width,this.mine),this.rows=this.progressGame.initRows()}get openedCellsNum(){let t=0;return this.rows.forEach((e=>t+=e.filter((t=>t.isOpen)).length)),t}get restMinesNum(){let t=0;return this.rows.forEach((e=>t+=e.filter((t=>t.isFlag)).length)),this.mine-t}get settingButtonUrl(){return"/Setting/"+this.width+"/"+this.height+"/"+this.mine}resetSetting(){console.log("Game resetSetting"),this.progressGame=new W(this.height,this.width,this.mine),this.rows=this.progressGame.initRows(),this.startButtonText="Reset",this.timer.reset()}openCell(t,e){if(console.log("Game openCell x:"+t+" y:"+e),!this.rows[t][e].isOpen&&!this.rows[t][e].isFlag){if(0===this.openedCellsNum&&(this.progressGame.putMines(t,e,this.rows),this.progressGame.setMinesCount(this.rows),this.timer.start()),this.rows[t][e].hasMine)return console.log("pushMine"),this.startButtonText="Lose",this.rows.forEach((t=>t.forEach((t=>t.isOpen=!0)))),void this.timer.stop();this.rows[t][e].isOpen=!0,""===this.rows[t][e].mineCount&&this.progressGame.openAroundCells(t,e,this.rows),this.openedCellsNum===this.progressGame.canBeOpenedCellNum&&(this.startButtonText="Clear",this.rows.forEach((t=>t.forEach((t=>t.isOpen=!0)))),this.timer.stop()),console.log("opendCellsNum:"+this.openedCellsNum)}}setFlagToCell(t,e){console.log("Game rightClicked x:"+t+" y:"+e),0!==this.openedCellsNum&&(this.rows[t][e].isOpen||(0!==this.restMinesNum||this.rows[t][e].isFlag)&&(this.rows[t][e].isFlag=!this.rows[t][e].isFlag))}};S=I([(0,o.Ei)({components:{Cell:H},props:{width:Number,height:Number,mine:Number}})],S);var A=S;const z=(0,M.Z)(A,[["render",d],["__scopeId","data-v-2e94993f"]]);var L=z;const V=t=>((0,n.dD)("data-v-47c68130"),t=t(),(0,n.Cn)(),t),Y=V((()=>(0,n._)("h1",null,"選択",-1))),q={class:"setting"},K=V((()=>(0,n._)("option",null,"簡単",-1))),J=V((()=>(0,n._)("option",null,"普通",-1))),Q=V((()=>(0,n._)("option",null,"難しい",-1))),X=[K,J,Q],tt=V((()=>(0,n._)("h1",null,"カスタム",-1))),et={class:"setting"},it={class:"setting"},st={class:"setting"},nt=["max"],rt={id:"buttons"};function ot(t,e,i,r,o,l){const h=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("section",null,[Y,(0,n._)("div",q,[(0,n.wy)((0,n._)("select",{class:"select-item","onUpdate:modelValue":e[0]||(e[0]=e=>t.selectedDifficulty=e)},X,512),[[s.bM,t.selectedDifficulty]])])]),(0,n._)("section",null,[tt,(0,n._)("div",et,[(0,n.Uk)(" 横の長さ "),(0,n.wy)((0,n._)("input",{type:"number",id:"w",min:2,max:50,"onUpdate:modelValue":e[1]||(e[1]=e=>t.inputWidth=e)},null,512),[[s.nr,t.inputWidth,void 0,{number:!0}]])]),(0,n._)("div",it,[(0,n.Uk)(" 縦の長さ "),(0,n.wy)((0,n._)("input",{type:"number",id:"h",min:2,max:50,"onUpdate:modelValue":e[2]||(e[2]=e=>t.inputHeight=e)},null,512),[[s.nr,t.inputHeight,void 0,{number:!0}]])]),(0,n._)("div",st,[(0,n.Uk)(" 爆弾数 "),(0,n.wy)((0,n._)("input",{type:"number",id:"b",min:1,max:t.mineMaxNum,"onUpdate:modelValue":e[3]||(e[3]=e=>t.inputMine=e)},null,8,nt),[[s.nr,t.inputMine,void 0,{number:!0}]])])]),(0,n._)("section",null,[(0,n._)("div",rt,[(0,n.Wm)(h,{class:"btn",id:"cancel-btn",to:t.cancelButtonUrl},{default:(0,n.w5)((()=>[(0,n.Uk)("キャンセル")])),_:1},8,["to"]),(0,n.Wm)(h,{class:"btn",id:"decision-btn",to:t.decisionButtonUrl},{default:(0,n.w5)((()=>[(0,n.Uk)("決定")])),_:1},8,["to"])])])],64)}var lt=i(6631),ht=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let at=class extends o.w3{constructor(...t){super(...t),(0,m.Z)(this,"inputWidth",9),(0,m.Z)(this,"inputHeight",9),(0,m.Z)(this,"inputMine",10),(0,m.Z)(this,"selectedDifficulty",null)}mounted(){this.inputWidth=Number(this.$route.params.width)??9,this.inputHeight=Number(this.$route.params.height)??9,this.inputMine=Number(this.$route.params.mine)??10}get mineMaxNum(){return Math.min(this.inputWidth*this.inputHeight-9,999)}get decisionButtonUrl(){return"/"+this.inputWidth+"/"+this.inputHeight+"/"+this.inputMine}get cancelButtonUrl(){return"/"+Number(this.$route.params.width)+"/"+Number(this.$route.params.height)+"/"+Number(this.$route.params.mine)}selectDifficulty(t){switch(console.log("Setting selectDifficulty selectedDifficulty:"+this.selectedDifficulty),t){case"簡単":this.inputWidth=9,this.inputHeight=9,this.inputMine=10;break;case"普通":this.inputWidth=16,this.inputHeight=16,this.inputMine=40;break;case"難しい":this.inputWidth=30,this.inputHeight=16,this.inputMine=99;break;default:break}}};ht([(0,lt.RL)("selectedDifficulty",{})],at.prototype,"selectDifficulty",null),at=ht([(0,o.Ei)({})],at);var ut=at;const ct=(0,M.Z)(ut,[["render",ot],["__scopeId","data-v-47c68130"]]);var pt=ct,dt=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let mt=class extends o.w3{};mt=dt([(0,o.Ei)({components:{Game:L,Setting:pt}})],mt);var ft=mt;const gt=(0,M.Z)(ft,[["render",r]]);var wt=gt,vt=i(2201);const bt=[{path:"/:width?/:height?/:mine?",component:L},{path:"/Setting/:width/:height/:mine",component:pt}],yt=(0,vt.p7)({history:(0,vt.PO)("/vue_sweeper/"),routes:bt});var _t=yt;const Ct=(0,s.ri)(wt);Ct.use(_t),Ct.mount("#app")}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}i.m=t,function(){var t=[];i.O=function(e,s,n,r){if(!s){var o=1/0;for(u=0;u<t.length;u++){s=t[u][0],n=t[u][1],r=t[u][2];for(var l=!0,h=0;h<s.length;h++)(!1&r||o>=r)&&Object.keys(i.O).every((function(t){return i.O[t](s[h])}))?s.splice(h--,1):(l=!1,r<o&&(o=r));if(l){t.splice(u--,1);var a=n();void 0!==a&&(e=a)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[s,n,r]}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,r,o=s[0],l=s[1],h=s[2],a=0;if(o.some((function(e){return 0!==t[e]}))){for(n in l)i.o(l,n)&&(i.m[n]=l[n]);if(h)var u=h(i)}for(e&&e(s);a<o.length;a++)r=o[a],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return i.O(u)},s=self["webpackChunkvue_sweeper"]=self["webpackChunkvue_sweeper"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(3583)}));s=i.O(s)})();